{"ast":null,"code":"import _regeneratorRuntime from \"C:/proyectos/next/seani/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/proyectos/next/seani/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:/proyectos/next/seani/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Provider } from 'react-redux';\nimport withRedux from \"next-redux-wrapper\";\nimport store from '../redux/store';\nimport { SnackbarProvider } from \"notistack\";\nimport { au, db } from '../utils/firebase';\nimport { collection } from '../utils/variables';\nimport { getInitialData, getUser } from '../utils/api';\nimport Layout from '../Layout/Layout';\nimport \"materialize-css/dist/css/materialize.css\";\nimport \"semantic-ui-css/semantic.min.css\";\nimport '../assets/styles/index.css';\n\nfunction MyApp(_ref) {\n  var Component = _ref.Component,\n      pageProps = _ref.pageProps,\n      respuesta = _ref.respuesta,\n      alumno = _ref.alumno;\n  return /*#__PURE__*/_jsx(Provider, {\n    store: store,\n    children: /*#__PURE__*/_jsx(SnackbarProvider, {\n      maxSnack: 3,\n      children: /*#__PURE__*/_jsx(Layout, {\n        user: respuesta === null || respuesta === void 0 ? void 0 : respuesta.user,\n        alumno: alumno,\n        children: /*#__PURE__*/_jsx(Component, _objectSpread(_objectSpread({}, pageProps), {}, {\n          user: respuesta === null || respuesta === void 0 ? void 0 : respuesta.user,\n          alumno: alumno\n        }))\n      })\n    })\n  });\n}\n\nMyApp.getInitialProps = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref2) {\n    var ctx, isServer, user, respuesta, _ctx$req, _ctx$res, _ctx$res$writeHead, _respuesta$user, _data$docs$, _ctx$req2, data, alumno, _ctx$res2, _ctx$res2$writeHead;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            ctx = _ref2.ctx;\n            isServer = false;\n\n            if (!isServer) {\n              _context.next = 6;\n              break;\n            }\n\n            return _context.abrupt(\"return\", {});\n\n          case 6:\n            user = au.currentUser;\n            respuesta = {\n              user: user\n            }; // const respuesta = await getInitialData();\n\n            if (respuesta.user) {\n              _context.next = 15;\n              break;\n            }\n\n            if (!((ctx === null || ctx === void 0 ? void 0 : (_ctx$req = ctx.req) === null || _ctx$req === void 0 ? void 0 : _ctx$req.url) !== \"/\")) {\n              _context.next = 12;\n              break;\n            }\n\n            ctx === null || ctx === void 0 ? void 0 : (_ctx$res = ctx.res) === null || _ctx$res === void 0 ? void 0 : (_ctx$res$writeHead = _ctx$res.writeHead(302, {\n              Location: \"/\"\n            })) === null || _ctx$res$writeHead === void 0 ? void 0 : _ctx$res$writeHead.end();\n            return _context.abrupt(\"return\", {});\n\n          case 12:\n            return _context.abrupt(\"return\", {});\n\n          case 15:\n            _context.next = 17;\n            return db.collection(collection).where(\"user\", \"==\", respuesta === null || respuesta === void 0 ? void 0 : (_respuesta$user = respuesta.user) === null || _respuesta$user === void 0 ? void 0 : _respuesta$user.uid).get();\n\n          case 17:\n            data = _context.sent;\n            alumno = {\n              data: data === null || data === void 0 ? void 0 : (_data$docs$ = data.docs[0]) === null || _data$docs$ === void 0 ? void 0 : _data$docs$.data()\n            };\n\n            if (!((ctx === null || ctx === void 0 ? void 0 : (_ctx$req2 = ctx.req) === null || _ctx$req2 === void 0 ? void 0 : _ctx$req2.url) === \"/\")) {\n              _context.next = 22;\n              break;\n            }\n\n            ctx === null || ctx === void 0 ? void 0 : (_ctx$res2 = ctx.res) === null || _ctx$res2 === void 0 ? void 0 : (_ctx$res2$writeHead = _ctx$res2.writeHead(302, {\n              Location: \"/home\"\n            })) === null || _ctx$res2$writeHead === void 0 ? void 0 : _ctx$res2$writeHead.end();\n            return _context.abrupt(\"return\", {\n              respuesta: respuesta,\n              alumno: alumno\n            });\n\n          case 22:\n            return _context.abrupt(\"return\", {\n              respuesta: respuesta,\n              alumno: alumno\n            });\n\n          case 23:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nvar makeStore = function makeStore() {\n  return store;\n};\n\nexport default withRedux(makeStore)(MyApp);","map":null,"metadata":{},"sourceType":"module"}